<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NVIDIA RTX 4070 Ti - TechZone</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-microchip text-neon-green"></i>
                <span class="ms-2">TechZone</span>
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#products">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#contact">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#cart">
                            <i class="fas fa-shopping-cart text-neon-yellow"></i>
                            <span class="badge bg-neon-green text-dark ms-1">0</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Product Header -->
    <section class="product-header py-5" style="margin-top: 80px;">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="../index.html" class="text-neon-yellow">Home</a></li>
                    <li class="breadcrumb-item"><a href="../index.html#products" class="text-neon-yellow">Products</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">Graphics Card</li>
                </ol>
            </nav>
        </div>
    </section>

    <!-- Product Details -->
    <section class="product-details py-5">
        <div class="container">
            <div class="row">
                <!-- Product Images -->
                <div class="col-lg-6">
                    <div class="product-gallery">
                        <!-- Main Image Carousel -->
                        <div id="productCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000"
                            data-bs-wrap="true" data-bs-pause="hover">
                            <!-- Carousel Indicators -->
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="0"
                                    class="active" aria-current="true" aria-label="Slide 1"></button>
                                <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="1"
                                    aria-label="Slide 2"></button>
                                <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="2"
                                    aria-label="Slide 3"></button>
                                <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="3"
                                    aria-label="Slide 4"></button>
                            </div>

                            <!-- Carousel Items -->
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="../assets/NVIDIA-RTX-a.jpg" class="d-block w-100 rounded"
                                        alt="Graphics Card - Front View">
                                </div>
                                <div class="carousel-item">
                                    <img src="../assets/NVIDIA-RTX-b.jpg" class="d-block w-100 rounded"
                                        alt="Graphics Card - Side View">
                                </div>
                                <div class="carousel-item">
                                    <img src="../assets/NVIDIA-RTX-a.jpg" class="d-block w-100 rounded"
                                        alt="Graphics Card - Back View">
                                </div>
                                <div class="carousel-item">
                                    <img src="../assets/NVIDIA-RTX-b.jpg" class="d-block w-100 rounded"
                                        alt="Graphics Card - Detail View">
                                </div>
                            </div>

                            <!-- Carousel Controls -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel"
                                data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel"
                                data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>

                        <!-- Thumbnail Navigation -->
                        <div class="thumbnail-navigation">
                            <div class="row g-2">
                                <div class="col-3">
                                    <img src="../assets/NVIDIA-RTX-a.jpg" alt="Front View"
                                        class="img-fluid rounded thumbnail-img active" data-bs-target="#productCarousel"
                                        data-bs-slide-to="0">
                                </div>
                                <div class="col-3">
                                    <img src="../assets/NVIDIA-RTX-b.jpg" alt="Side View"
                                        class="img-fluid rounded thumbnail-img" data-bs-target="#productCarousel"
                                        data-bs-slide-to="1">
                                </div>
                                <div class="col-3">
                                    <img src="../assets/NVIDIA-RTX-a.jpg" alt="Back View"
                                        class="img-fluid rounded thumbnail-img" data-bs-target="#productCarousel"
                                        data-bs-slide-to="2">
                                </div>
                                <div class="col-3">
                                    <img src="../assets/NVIDIA-RTX-b.jpg" alt="Detail View"
                                        class="img-fluid rounded thumbnail-img" data-bs-target="#productCarousel"
                                        data-bs-slide-to="3">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Product Info -->
                <div class="col-lg-6">
                    <div class="product-info">
                        <h1 class="product-title mb-3">NVIDIA RTX 4070 Ti</h1>
                        <div class="product-rating mb-3">
                            <div class="stars">
                                <i class="fas fa-star text-neon-yellow"></i>
                                <i class="fas fa-star text-neon-yellow"></i>
                                <i class="fas fa-star text-neon-yellow"></i>
                                <i class="fas fa-star text-neon-yellow"></i>
                                <i class="fas fa-star text-neon-yellow"></i>
                            </div>
                            <span class="rating-text ms-2">5.0 (156 reviews)</span>
                        </div>

                        <div class="product-price mb-4">
                            <span class="current-price">$799</span>
                            <span class="original-price">$899</span>
                            <span class="discount-badge">Save $100</span>
                        </div>

                        <div class="product-description mb-4">
                            <p>Unleash the power of next-generation gaming with the NVIDIA RTX 4070 Ti. Built on the
                                revolutionary Ada Lovelace architecture, this graphics card delivers exceptional performance
                                with 12GB of GDDR6X memory and advanced ray tracing capabilities. Experience ultra-smooth
                                gameplay at 4K resolution with DLSS 3.0 technology.</p>
                        </div>

                        <div class="product-actions mt-4">
                            <button type="button" class="btn btn-line btn-lg buy-now-btn"
                                data-product="NVIDIA RTX 4070 Ti" data-price="799"
                                data-category="Graphics Card">
                                <i class="fas fa-shopping-cart me-2"></i>Buy Now - $799
                            </button>
                        </div>

                        <div class="product-features">
                            <h5 class="mb-3">Key Features:</h5>
                            <ul class="feature-list">
                                <li><i class="fas fa-check text-neon-green me-2"></i>12GB GDDR6X Memory</li>
                                <li><i class="fas fa-check text-neon-green me-2"></i>Ray Tracing Technology</li>
                                <li><i class="fas fa-check text-neon-green me-2"></i>DLSS 3.0 AI Upscaling</li>
                                <li><i class="fas fa-check text-neon-green me-2"></i>Ada Lovelace Architecture</li>
                                <li><i class="fas fa-check text-neon-green me-2"></i>4K Gaming Ready</li>
                                <li><i class="fas fa-check text-neon-green me-2"></i>Advanced Cooling Solution</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Specifications -->
    <section class="product-specs py-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="section-title mb-5">Technical <span class="text-neon-green">Specifications</span></h2>
                    
                    <div class="specs-grid">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="spec-category">
                                    <h4 class="spec-category-title text-neon-green mb-3">
                                        <i class="fas fa-microchip me-2"></i>GPU
                                    </h4>
                                    <div class="spec-item">
                                        <span class="spec-label">Architecture:</span>
                                        <span class="spec-value">Ada Lovelace</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">CUDA Cores:</span>
                                        <span class="spec-value">7,680</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Base Clock:</span>
                                        <span class="spec-value">2,610 MHz</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Boost Clock:</span>
                                        <span class="spec-value">2,610 MHz</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="spec-category">
                                    <h4 class="spec-category-title text-neon-green mb-3">
                                        <i class="fas fa-memory me-2"></i>Memory
                                    </h4>
                                    <div class="spec-item">
                                        <span class="spec-label">Memory Size:</span>
                                        <span class="spec-value">12 GB</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Memory Type:</span>
                                        <span class="spec-value">GDDR6X</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Memory Bus:</span>
                                        <span class="spec-value">192-bit</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Memory Speed:</span>
                                        <span class="spec-value">21 Gbps</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="spec-category">
                                    <h4 class="spec-category-title text-neon-green mb-3">
                                        <i class="fas fa-tachometer-alt me-2"></i>Performance
                                    </h4>
                                    <div class="spec-item">
                                        <span class="spec-label">Ray Tracing Cores:</span>
                                        <span class="spec-value">3rd Generation</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Tensor Cores:</span>
                                        <span class="spec-value">4th Generation</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">TDP:</span>
                                        <span class="spec-value">285W</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">Power Connector:</span>
                                        <span class="spec-value">8-pin + 8-pin</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="spec-category">
                                    <h4 class="spec-category-title text-neon-green mb-3">
                                        <i class="fas fa-desktop me-2"></i>Display
                                    </h4>
                                    <div class="spec-item">
                                        <span class="spec-label">Max Resolution:</span>
                                        <span class="spec-value">8K @ 60Hz</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">DisplayPort:</span>
                                        <span class="spec-value">3x DisplayPort 1.4a</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">HDMI:</span>
                                        <span class="spec-value">2x HDMI 2.1</span>
                                    </div>
                                    <div class="spec-item">
                                        <span class="spec-label">HDCP:</span>
                                        <span class="spec-value">2.3</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Products -->
    <section class="related-products py-5">
        <div class="container">
            <h2 class="section-title mb-5">Related <span class="text-neon-green">Products</span></h2>

            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="../assets/Gaming-Laptop-a.png"
                                alt="Gaming Laptop" class="img-fluid">
                            <div class="product-overlay">
                                <a href="gaming-laptop.html" class="btn btn-neon-green">View Details</a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">ASUS ROG Strix Gaming Laptop</h5>
                            <p class="product-category">Gaming Laptop</p>
                            <div class="product-price">
                                <span class="current-price">$1,299</span>
                                <span class="original-price">$1,499</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="../assets/Logitech-G-Pro-a.jpg"
                                alt="Gaming Mouse" class="img-fluid">
                            <div class="product-overlay">
                                <a href="gaming-mouse.html" class="btn btn-neon-green">View Details</a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">Logitech G Pro X Superlight</h5>
                            <p class="product-category">Gaming Mouse</p>
                            <div class="product-price">
                                <span class="current-price">$149</span>
                                <span class="original-price">$179</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="../assets/test.jpg"
                                alt="Mechanical Keyboard" class="img-fluid">
                            <div class="product-overlay">
                                <a href="mechanical-keyboard.html" class="btn btn-neon-green">View Details</a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">Corsair K100 RGB</h5>
                            <p class="product-category">Mechanical Keyboard</p>
                            <div class="product-price">
                                <span class="current-price">$229</span>
                                <span class="original-price">$259</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="../assets/test.jpg"
                                alt="Gaming Headset" class="img-fluid">
                            <div class="product-overlay">
                                <a href="gaming-headset.html" class="btn btn-neon-green">View Details</a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">SteelSeries Arctis Pro</h5>
                            <p class="product-category">Gaming Headset</p>
                            <div class="product-price">
                                <span class="current-price">$179</span>
                                <span class="original-price">$199</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer py-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h5 class="footer-title">
                        <i class="fas fa-microchip text-neon-green"></i>
                        TechZone
                    </h5>
                    <p class="footer-text">
                        Your trusted partner for premium computer hardware and gaming equipment.
                    </p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2">
                    <h6 class="footer-subtitle">Quick Links</h6>
                    <ul class="footer-links">
                        <li><a href="../index.html#home">Home</a></li>
                        <li><a href="../index.html#products">Products</a></li>
                        <li><a href="../index.html#about">About</a></li>
                        <li><a href="../index.html#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h6 class="footer-subtitle">Categories</h6>
                    <ul class="footer-links">
                        <li><a href="gaming-laptop.html"><i class="fas fa-laptop me-2"></i>Gaming Laptops</a></li>
                        <li><a href="graphics-card.html"><i class="fas fa-microchip me-2"></i>Graphics Cards</a></li>
                        <li><a href="gaming-mouse.html"><i class="fas fa-mouse me-2"></i>Gaming Mice</a></li>
                        <li><a href="mechanical-keyboard.html"><i class="fas fa-keyboard me-2"></i>Keyboards</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h6 class="footer-subtitle">Contact Info</h6>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> 123 Tech Street, Digital City</p>
                        <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                        <p><i class="fas fa-envelope"></i> info@techzone.com</p>
                    </div>
                </div>
            </div>
            <hr class="footer-divider">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="footer-copyright">
                        &copy; 2024 TechZone. All rights reserved. | Designed with <i class="fas fa-heart"></i> for gamers
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Configuration JS -->
    <script src="../js/config.js"></script>

    <!-- Custom JS -->
    <script src="../js/main.js"></script>

    <!-- Product Page JS -->
    <script>
        // Wait for DOM and configuration to be ready
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize order form functionality
            initProductOrderForm();

            // Initialize thumbnail functionality
            initThumbnails();
        });

        // Initialize order form functionality
        function initProductOrderForm() {
            console.log('Initializing product order form...');

            // Get the buy now button
            const buyNowBtn = document.querySelector('.buy-now-btn');
            if (buyNowBtn) {
                buyNowBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                    console.log('Buy Now button clicked');

                    // Get product details from button data attributes
                    const productName = this.getAttribute('data-product');
                    const productPrice = this.getAttribute('data-price');
                    const productCategory = this.getAttribute('data-category');

                    console.log('Product details:', { productName, productPrice, productCategory });

                    // Populate order form with product details
                    populateProductOrderForm(productName, productPrice, productCategory);

                    // Show the order modal
                    const orderModal = new bootstrap.Modal(document.getElementById('orderModal'));
                    orderModal.show();
                });
            }

            // Handle order form submission
            const orderForm = document.getElementById('orderForm');
            if (orderForm) {
                orderForm.addEventListener('submit', handleProductOrderSubmission);
            }
        }

        // Populate order form with product details
        function populateProductOrderForm(productName, productPrice, productCategory) {
            // Update order summary in the form
            const itemNameElement = document.querySelector('.item-name');
            const itemPriceElement = document.querySelector('.item-price');
            const orderTotalElement = document.querySelector('.order-total strong');

            if (itemNameElement) itemNameElement.textContent = productName;
            if (itemPriceElement) itemPriceElement.textContent = `$${productPrice}`;
            if (orderTotalElement) orderTotalElement.textContent = `Total: $${productPrice}`;

            // Store product details for form submission
            document.getElementById('orderForm').setAttribute('data-product-name', productName);
            document.getElementById('orderForm').setAttribute('data-product-price', productPrice);
            document.getElementById('orderForm').setAttribute('data-product-category', productCategory);
        }

        // Handle order form submission
        function handleProductOrderSubmission(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(e.target);
            const orderData = {
                product: {
                    name: e.target.getAttribute('data-product-name'),
                    price: e.target.getAttribute('data-price'),
                    category: e.target.getAttribute('data-product-category')
                },
                customer: {
                    firstName: formData.get('firstName') || document.getElementById('firstName').value,
                    lastName: formData.get('lastName') || document.getElementById('lastName').value,
                    email: formData.get('email') || document.getElementById('email').value,
                    phone: formData.get('phone') || document.getElementById('phone').value
                },
                delivery: {
                    address: formData.get('address') || document.getElementById('address').value,
                    city: formData.get('city') || document.getElementById('city').value,
                    state: formData.get('state') || document.getElementById('state').value,
                    zipCode: formData.get('zipCode') || document.getElementById('zipCode').value,
                    country: formData.get('country') || document.getElementById('country').value
                },
                notes: formData.get('notes') || document.getElementById('notes').value,
                termsAccepted: document.getElementById('termsAccepted').checked
            };

            // Validate required fields
            if (!validateProductOrderForm(orderData)) {
                showNotification('Please fill in all required fields and accept terms & conditions.', 'error');
                return;
            }

            // Show order preview
            showProductOrderPreview(orderData);
        }

        // Show order preview
        function showProductOrderPreview(orderData) {
            // Create preview modal content
            const previewContent = `
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-eye me-2"></i>Order Preview
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="order-preview">
                        <!-- Product Details -->
                        <div class="preview-section mb-4">
                            <h6 class="preview-section-title">
                                <i class="fas fa-box me-2 text-primary"></i>Product Details
                            </h6>
                            <div class="preview-content">
                                <p><strong>Product:</strong> ${orderData.product.name}</p>
                                <p><strong>Price:</strong> $${orderData.product.price}</p>
                                <p><strong>Category:</strong> ${orderData.product.category}</p>
                            </div>
                        </div>
                        
                        <!-- Customer Information -->
                        <div class="preview-section mb-4">
                            <h6 class="preview-section-title">
                                <i class="fas fa-user me-2 text-success"></i>Customer Information
                            </h6>
                            <div class="preview-content">
                                <p><strong>Name:</strong> ${orderData.customer.firstName} ${orderData.customer.lastName}</p>
                                <p><strong>Email:</strong> ${orderData.customer.email}</p>
                                <p><strong>Phone:</strong> ${orderData.customer.phone}</p>
                            </div>
                        </div>
                        
                        <!-- Delivery Address -->
                        <div class="preview-section mb-4">
                            <h6 class="preview-section-title">
                                <i class="fas fa-map-marker-alt me-2 text-warning"></i>Delivery Address
                            </h6>
                            <div class="preview-content">
                                <p><strong>Address:</strong> ${orderData.delivery.address}</p>
                                <p><strong>City:</strong> ${orderData.delivery.city}</p>
                                <p><strong>State:</strong> ${orderData.delivery.state}</p>
                                <p><strong>ZIP:</strong> ${orderData.delivery.zipCode}</p>
                                <p><strong>Country:</strong> ${orderData.delivery.country}</p>
                            </div>
                        </div>
                        
                        ${orderData.notes ? `
                        <!-- Additional Notes -->
                        <div class="preview-section mb-4">
                            <h6 class="preview-section-title">
                                <i class="fas fa-sticky-note me-2 text-info"></i>Additional Notes
                            </h6>
                            <div class="preview-content">
                                <p>${orderData.notes}</p>
                            </div>
                        </div>
                        ` : ''}
                        
                        <!-- Order Summary -->
                        <div class="preview-section mb-4">
                            <h6 class="preview-section-title">
                                <i class="fas fa-calculator me-2 text-danger"></i>Order Summary
                            </h6>
                            <div class="preview-content">
                                <div class="order-total-preview">
                                    <h5 class="text-primary">Total: $${orderData.product.price}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="goBackToProductForm()">
                        <i class="fas fa-arrow-left me-2"></i>Back to Form
                    </button>
                    <button type="button" class="btn btn-success" onclick="placeProductOrder(${JSON.stringify(orderData).replace(/"/g, '&quot;')})">
                        <i class="fas fa-check me-2"></i>Place Order
                    </button>
                </div>
            `;

            // Update modal content
            const orderModal = document.getElementById('orderModal');
            orderModal.querySelector('.modal-content').innerHTML = previewContent;

            // Show the preview
            const modal = new bootstrap.Modal(orderModal);
            modal.show();
        }

        // Go back to form
        window.goBackToProductForm = function () {
            // Reload the page to show the original form
            location.reload();
        };

        // Place product order
        window.placeProductOrder = function (orderData) {
            console.log('Placing product order:', orderData);

            // Check if CONFIG is available
            if (typeof CONFIG === 'undefined') {
                console.error('CONFIG is not defined');
                showNotification('Configuration error. Please refresh the page and try again.', 'error');
                return;
            }

            // Show loading state
            const placeOrderBtn = document.querySelector('.btn-success');
            const originalText = placeOrderBtn.innerHTML;
            placeOrderBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Placing Order...';
            placeOrderBtn.disabled = true;

            // Send order to backend
            const backendUrl = CONFIG.BACKEND_URL;
            const ordersEndpoint = CONFIG.API_ENDPOINTS?.ORDERS || '/api/orders';

            fetch(backendUrl + ordersEndpoint + '/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(orderData)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Show success message
                        showProductOrderSuccess(orderData);
                    } else {
                        // Show error message
                        showNotification('Failed to place order: ' + (data.error || 'Unknown error'), 'error');
                        placeOrderBtn.innerHTML = originalText;
                        placeOrderBtn.disabled = false;
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('Failed to place order. Please try again.', 'error');
                    placeOrderBtn.innerHTML = originalText;
                    placeOrderBtn.disabled = false;
                });
        };

        // Show order success
        function showProductOrderSuccess(orderData) {
            // Send WhatsApp message to customer
            sendWhatsAppMessage(orderData);

            // Create success modal content
            const successContent = `
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-check-circle me-2"></i>Order Placed Successfully!
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="order-success">
                        <i class="fas fa-check-circle text-success" style="font-size: 4rem; margin-bottom: 1rem;"></i>
                        <h4 class="text-success mb-3">Thank You! 🎊</h4>
                        <p class="mb-3 text-muted">Welcome to the TechZone family!</p>
                        <p class="mb-3">Your order for <strong>${orderData.product.name}</strong> has been placed successfully!</p>
                        <p class="mb-3">🎉 <strong>Great news!</strong> Our sales team has been notified and will contact you soon to confirm your order and discuss delivery options.</p>
                        <p class="mb-3">📞 <strong>What happens next?</strong> You'll receive a call within the next 2-4 hours during business hours (9 AM - 6 PM).</p>
                        <p class="mb-3">📱 <strong>WhatsApp Message:</strong> We've also sent you a confirmation message on WhatsApp!</p>
                        
                        <div class="order-details-summary mt-4">
                            <h6 class="text-muted">Order Summary:</h6>
                            <p><strong>Product:</strong> ${orderData.product.name}</p>
                            <p><strong>Total:</strong> $${orderData.product.price}</p>
                            <p><strong>Order ID:</strong> ${generateProductOrderId()}</p>
                        </div>
                        
                        <div class="alert alert-info mt-4">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Next Steps:</strong><br>
                            1. 📞 <strong>Sales team will call you</strong> within 2-4 hours<br>
                            2. 💳 <strong>Payment confirmation</strong> and order verification<br>
                            3. 🚚 <strong>Delivery scheduling</strong> based on your preference<br>
                            4. 📱 <strong>WhatsApp updates</strong> for tracking and status
                        </div>
                        
                        <div class="alert alert-warning mt-3">
                            <i class="fas fa-clock me-2"></i>
                            <strong>Redirecting to home page in <span id="countdown">5</span> seconds...</strong>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="redirectToHome()">
                        <i class="fas fa-home me-2"></i>Go to Home Now
                    </button>
                </div>
            `;

            // Update modal content
            const orderModal = document.getElementById('orderModal');
            orderModal.querySelector('.modal-content').innerHTML = successContent;

            // Show the success message
            const modal = new bootstrap.Modal(orderModal);
            modal.show();

            // Start countdown and auto-redirect
            startCountdownAndRedirect();
        }

        // Send WhatsApp message to customer
        function sendWhatsAppMessage(orderData) {
            try {
                // Format phone number (remove any non-digit characters and add country code if needed)
                let phoneNumber = orderData.customer.phone.replace(/\D/g, '');
                
                // If phone number doesn't start with country code, assume US (+1)
                if (!phoneNumber.startsWith('1') && phoneNumber.length === 10) {
                    phoneNumber = '1' + phoneNumber;
                }
                
                // Add + prefix for international format
                phoneNumber = '+' + phoneNumber;

                // Create WhatsApp message content
                const message = `🎉 *TechZone Order Confirmation* 🎉

Dear ${orderData.customer.firstName},

Thank you for your order! We're excited to welcome you to the TechZone family.

📦 *Order Details:*
• Product: ${orderData.product.name}
• Price: $${orderData.product.price}
• Order ID: ${generateProductOrderId()}

👤 *Customer Information:*
• Name: ${orderData.customer.firstName} ${orderData.customer.lastName}
• Email: ${orderData.customer.email}
• Phone: ${orderData.customer.phone}

📍 *Delivery Address:*
${orderData.delivery.address}
${orderData.delivery.city}, ${orderData.delivery.state} ${orderData.delivery.zipCode}
${orderData.delivery.country}

📞 *Next Steps:*
Our sales team will contact you within 2-4 hours to:
• Confirm your order details
• Process payment
• Schedule delivery

📱 *Stay Connected:*
You'll receive updates about your order status via WhatsApp.

Thank you for choosing TechZone!
Best regards,
The TechZone Team

#TechZone #Gaming #ComputerStore`;

                // Send message via backend API
                const backendUrl = CONFIG.BACKEND_URL;
                const whatsappEndpoint = CONFIG.API_ENDPOINTS?.WHATSAPP || '/api/whatsapp';

                fetch(backendUrl + whatsappEndpoint + '/send-message', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        to: phoneNumber,
                        message: message
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        console.log('WhatsApp message sent successfully:', data);
                        showNotification('WhatsApp confirmation message sent! 📱', 'success');
                    } else {
                        console.warn('Failed to send WhatsApp message:', data.error);
                        // Don't show error to user as this is not critical
                    }
                })
                .catch(error => {
                    console.error('Error sending WhatsApp message:', error);
                    // Don't show error to user as this is not critical
                });

            } catch (error) {
                console.error('Error in sendWhatsAppMessage:', error);
                // Don't show error to user as this is not critical
            }
        }

        // Generate order ID
        function generateProductOrderId() {
            const timestamp = Date.now().toString(36);
            const random = Math.random().toString(36).substr(2, 5);
            return `ORD-${timestamp}-${random}`.toUpperCase();
        }

        // Validate order form
        function validateProductOrderForm(orderData) {
            // Check if all required fields are filled
            const requiredFields = [
                orderData.customer.firstName,
                orderData.customer.lastName,
                orderData.customer.email,
                orderData.customer.phone,
                orderData.delivery.address,
                orderData.delivery.city,
                orderData.delivery.state,
                orderData.delivery.zipCode,
                orderData.delivery.country
            ];

            return requiredFields.every(field => field && field.trim() !== '') && orderData.termsAccepted;
        }

        // Show notification function for product page
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            `;

            // Add to page
            document.body.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // Make showNotification available globally
        window.showNotification = showNotification;

        // Function to redirect to home page
        function redirectToHome() {
            window.location.href = '../index.html';
        }

        // Function to start countdown and auto-redirect
        function startCountdownAndRedirect() {
            let countdown = 5;
            const countdownElement = document.getElementById('countdown');

            if (countdownElement) {
                const countdownInterval = setInterval(() => {
                    countdown--;
                    countdownElement.textContent = countdown;

                    if (countdown <= 0) {
                        clearInterval(countdownInterval);
                        redirectToHome();
                    }
                }, 1000);
            }
        }

        // Make redirectToHome globally available
        window.redirectToHome = redirectToHome;

        // Initialize thumbnail functionality
        function initThumbnails() {
            // Thumbnail image click functionality
            document.querySelectorAll('.thumbnail-img').forEach(img => {
                img.addEventListener('click', function () {
                    const mainImage = document.querySelector('.main-image img');
                    if (mainImage) {
                        mainImage.src = this.src;

                        // Update alt text
                        mainImage.alt = this.alt;
                    }

                    // Add active class to clicked thumbnail
                    document.querySelectorAll('.thumbnail-img').forEach(thumb => thumb.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Add active class to first thumbnail
            const firstThumbnail = document.querySelector('.thumbnail-img');
            if (firstThumbnail) {
                firstThumbnail.classList.add('active');
            }
        }
    </script>

    <!-- Order Form Modal -->
    <div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="orderModalLabel">
                        <i class="fas fa-shopping-cart me-2"></i>Place Your Order
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="orderForm">
                        <div class="row g-3">
                            <!-- Personal Information -->
                            <div class="col-12">
                                <h6 class="form-section-title">
                                    <i class="fas fa-user me-2"></i>Personal Information
                                </h6>
                            </div>
                            <div class="col-md-6">
                                <label for="firstName" class="form-label">First Name *</label>
                                <input type="text" class="form-control" id="firstName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="lastName" class="form-label">Last Name *</label>
                                <input type="text" class="form-control" id="lastName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="email" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="col-md-6">
                                <label for="phone" class="form-label">Phone Number *</label>
                                <input type="tel" class="form-control" id="phone" required>
                            </div>

                            <!-- Delivery Address -->
                            <div class="col-12">
                                <h6 class="form-section-title">
                                    <i class="fas fa-map-marker-alt me-2"></i>Delivery Address
                                </h6>
                            </div>
                            <div class="col-12">
                                <label for="address" class="form-label">Street Address *</label>
                                <input type="text" class="form-control" id="address" required>
                            </div>
                            <div class="col-md-6">
                                <label for="city" class="form-label">City *</label>
                                <input type="text" class="form-control" id="city" required>
                            </div>
                            <div class="col-md-3">
                                <label for="state" class="form-label">State/Province *</label>
                                <input type="text" class="form-control" id="state" required>
                            </div>
                            <div class="col-md-3">
                                <label for="zipCode" class="form-label">ZIP/Postal Code *</label>
                                <input type="text" class="form-control" id="zipCode" required>
                            </div>
                            <div class="col-md-6">
                                <label for="country" class="form-label">Country *</label>
                                <select class="form-select" id="country" required>
                                    <option value="">Select Country</option>
                                    <option value="US">United States</option>
                                    <option value="CA">Canada</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="AU">Australia</option>
                                    <option value="DE">Germany</option>
                                    <option value="FR">France</option>
                                    <option value="JP">Japan</option>
                                    <option value="IN">India</option>
                                    <option value="BR">Brazil</option>
                                    <option value="MX">Mexico</option>
                                    <option value="LK">Sri Lanka</option>
                                </select>
                            </div>

                            <!-- Order Details -->
                            <div class="col-12">
                                <h6 class="form-section-title">
                                    <i class="fas fa-box me-2"></i>Order Details
                                </h6>
                            </div>
                            <div class="col-12">
                                <div class="order-summary">
                                    <div class="order-item">
                                        <span class="item-name">Product Name</span>
                                        <span class="item-price">$0.00</span>
                                    </div>
                                    <div class="order-total">
                                        <strong>Total: $0.00</strong>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Notes -->
                            <div class="col-12">
                                <label for="notes" class="form-label">Additional Notes</label>
                                <textarea class="form-control" id="notes" rows="3"
                                    placeholder="Any special instructions or delivery preferences..."></textarea>
                            </div>

                            <!-- Terms and Conditions -->
                            <div class="col-12">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="termsAccepted" required>
                                    <label class="form-check-label" for="termsAccepted">
                                        I agree to the <a href="#" class="text-decoration-none">Terms & Conditions</a>
                                        and <a href="#" class="text-decoration-none">Privacy Policy</a> *
                                    </label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="submit" form="orderForm" class="btn btn-line">
                        <i class="fas fa-check me-2"></i>Place Order
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>

</html> 